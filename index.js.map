{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API = '49333964-3aa2fa57d2af3ff070f171ad2';\nconst MAIN_URL = 'https://pixabay.com/api/';\n\nlet page = 1;\nexport const fetchImages = async searchQuery => {\n  try {\n    const response = await axios.get(MAIN_URL, {\n      params: {\n        key: API,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    });\n    page += 1;\n    return response.data.hits;\n  } catch (error) {\n    console.log('Error fetching images:', error);\n  }\n  return [];\n};\nexport const resetPage = () => {\n  page = 1;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'data-description',\n  captionPosition: 'bottom',\n  captionDelay: 0,\n});\n\nexport const renderImg = images => {\n  const gallery = document.querySelector('.gallery');\n\n  images.forEach(image => {\n    const galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery-item');\n\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n\n    const linkElement = document.createElement('a');\n    linkElement.href = image.largeImageURL;\n    linkElement.dataset.description = image.tags;\n    linkElement.appendChild(imgElement);\n\n    const description = document.createElement('p');\n    description.classList.add('description');\n    description.textContent = image.tags;\n\n    const infoBox = document.createElement('div');\n    infoBox.classList.add('info-box');\n    infoBox.innerHTML = `\n      <p><strong>Likes:</strong> <span class=\"info-value\">${image.likes}</span></p>\n      <p><strong>Views:</strong> <span class=\"info-value\">${image.views}</span></p>\n      <p><strong>Comments:</strong> <span class=\"info-value\">${image.comments}</span></p>\n      <p><strong>Downloads:</strong> <span class=\"info-value\">${image.downloads}</span></p>\n    `;\n\n    galleryItem.appendChild(linkElement);\n    galleryItem.appendChild(infoBox);\n    gallery.appendChild(galleryItem);\n  });\n\n  lightbox.refresh();\n};\n\nexport const showLoader = () => {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'block';\n};\n\nexport const hideLoader = () => {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n};\n\nexport const errorMessage = () => {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n};\n","import { fetchImages, resetPage } from './js/pixabay-api.js';\nimport {\n  renderImg,\n  showLoader,\n  hideLoader,\n  errorMessage,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('#load-more');\nconst gallery = document.querySelector('.gallery');\nlet totalHits = 0;\n\nconst scroll = () => {\n  const galleryItems = gallery.querySelectorAll('.gallery-item');\n  if (galleryItems.length > 0) {\n    const cardHeight = galleryItems[0].getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * cardHeight,\n      behavior: 'smooth',\n    });\n  }\n};\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchQuery = event.target['search-text'].value.trim();\n\n  gallery.innerHTML = '';\n\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Invalid input',\n      message: 'Please enter a valid search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  resetPage();\n  loadMoreButton.style.display = 'none';\n\n  showLoader();\n\n  try {\n    const images = await fetchImages(searchQuery);\n    if (images.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        message: 'Sorry, no images found. Please try another search.',\n        position: 'topRight',\n      });\n    } else {\n      renderImg(images);\n      totalHits = images.totalHits;\n\n      if (totalHits <= 15) {\n        loadMoreButton.style.display = 'none';\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      } else {\n        loadMoreButton.style.display = 'block';\n      }\n      scroll();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    errorMessage();\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  const searchQuery = document.querySelector('.form input').value.trim();\n  const images = await fetchImages(searchQuery);\n  renderImg(images);\n\n  if (images.length < 15) {\n    loadMoreButton.style.display = 'none';\n\n    iziToast.info({\n      title: 'End of results',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  scroll();\n});\n"],"names":["API","MAIN_URL","page","fetchImages","searchQuery","response","axios","error","resetPage","lightbox","SimpleLightbox","renderImg","images","gallery","image","galleryItem","imgElement","linkElement","description","infoBox","showLoader","loader","hideLoader","errorMessage","iziToast","form","loadMoreButton","totalHits","scroll","galleryItems","cardHeight","event"],"mappings":"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"}